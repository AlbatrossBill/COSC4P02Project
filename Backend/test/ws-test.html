<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Simple Websocket Secure Test</title>
<script>
var conn = new WebSocket("wss://127.0.0.1:8001")

conn.onopen = function () {
	console.log("Connection opened")
	conn.send('{"type":"message","msg":"Hello"}')
	conn.send('{"type":"message","msg":"how are you"}')
	conn.send('{"type":"message","msg":"who are you"}')
}

conn.onclose = function () {
	console.log("Connection closed")
}

conn.onmessage = function (evt) {
	console.info("Received "+evt.data)
	//conn.close()
}

conn.onerror = function () {
	console.error("Error")
}
</script>
</head>

<body>
<p><strong>Notes:</strong></p>
<ol>
	<li>Open web console</li>
	<li>node app.js</li>
	<li>Access "https://127.0.0.1:8001" in another tab. The browser should alert you about security, since the certificate is self-signed</li>
	<li>Accept security exception</li>
	<li>Reload this page</li>
</ol>
</body>
</html>